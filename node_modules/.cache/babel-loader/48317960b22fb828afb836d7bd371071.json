{"ast":null,"code":"import { call, put, takeLatest } from \"redux-saga/effects\";\nimport { loginRequest, loginFailure, loginSuccess, joinSuccess, joinFailure, joinRequest, existSuccess, existFailure, existRequest, modifySuccess, modifyFailure, modifyRequest, deleteRequest, deleteSuccess } from \"features/user/reducer/userSlice\";\nimport { userAPI } from \"features/user\";\n\nfunction* remove(action) {\n  try {\n    alert(action.payload);\n    const result = yield call(userAPI.removeAPI, action.payload);\n    alert(\"ëŒì•„ì˜´\");\n    yield put(deleteSuccess(result));\n    localStorage.clear();\n    window.location.href = \"/home\";\n  } catch (error) {\n    // alert(\"ì•„ì´ë””ì˜¤ë¥˜\")\n    yield put(modifyFailure(error));\n  }\n}\n\nfunction* exist(action) {\n  try {\n    const result = yield call(userAPI.existAPI, action.payload);\n    yield put(existSuccess(result));\n    alert(\"ê°€ëŠ¥í•œ ì•„ì´ë””ì…ë‹ˆë‹¤.\");\n  } catch (error) {\n    yield put(existFailure(error));\n    alert(error);\n    alert(\"ì“¸ìˆ˜ì—†ëŠ” ì•„ì´ë””ì…ë‹ˆë‹¤.\");\n  }\n}\n\nfunction* join(action) {\n  try {\n    const result = yield call(userAPI.joinAPI, action.payload);\n    yield put(joinSuccess(result));\n    window.location.href = 'users/login';\n    alert(\"ğŸ„íšŒì›ê°€ì…ì„ ì¶•í•˜ë“œë¦½ë‹ˆë‹¤ğŸ„\");\n  } catch (error) {\n    // alert(\"ì•„ì´ë””ì˜¤ë¥˜\")\n    yield put(joinFailure(error));\n  }\n}\n\nfunction* login(action) {\n  try {\n    const result = yield call(userAPI.loginAPI, action.payload);\n    yield put(loginSuccess(result));\n    window.localStorage.setItem('sessionToken', JSON.parse(JSON.stringify(result.data.tokenData)));\n    window.localStorage.setItem('sessionUser', JSON.stringify(result.data.userData));\n    window.location.href = \"/home\";\n  } catch (error) {\n    alert(\"ì•„ì´ë”” í˜¹ì€ ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤!\");\n    yield put(loginFailure(error));\n  }\n}\n\nfunction* modify(action) {\n  try {\n    const result = yield call(userAPI.modifyAPI, action.payload);\n    yield put(modifySuccess(result)); // const test = result.config.data\n    // alert(`result? :: ${test} :: type :: ${typeof test}`)\n    // alert(`result parse :: ${JSON.parse(JSON.stringify(test))} :: type :: ${typeof JSON.parse(JSON.stringify(test))}`)\n\n    window.localStorage.setItem('sessionUser', JSON.parse(JSON.stringify(result.config.data))); // alert(`SESSION ì €ì¥ë¨? ${window.localStorage.getItem('sessionUser')}`)\n\n    window.location.href = \"/mypage/setting\";\n  } catch (error) {\n    // alert(\"ì•„ì´ë””ì˜¤ë¥˜\")\n    yield put(modifyFailure(error));\n  }\n} // Watch í•¨ìˆ˜\n\n\nexport function* watchLogin() {\n  yield takeLatest(loginRequest.type, login); // loginRequestì—ì„œì˜ typeì´ ì‹¤í–‰ë˜ë©´ loginí•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ëŠ”ë°\n  // loginRequestì˜ actionì´ ìˆìœ¼ë©´ ê·¸ ì•¡ì…˜ì´ loginí•¨ìˆ˜ì˜ ì¸ìë¡œ ë“¤ì–´ê°‘ë‹ˆë‹¤.\n}\nexport function* watchJoin() {\n  yield takeLatest(joinRequest.type, join);\n}\nexport function* watchExist() {\n  yield takeLatest(existRequest.type, exist);\n}\nexport function* watchModify() {\n  yield takeLatest(modifyRequest.type, modify);\n}\nexport function* watchRemove() {\n  yield takeLatest(deleteRequest.type, remove);\n}","map":{"version":3,"sources":["D:/2021/suwan/mern-stack-front/src/features/user/module/userSaga.ts"],"names":["call","put","takeLatest","loginRequest","loginFailure","loginSuccess","joinSuccess","joinFailure","joinRequest","existSuccess","existFailure","existRequest","modifySuccess","modifyFailure","modifyRequest","deleteRequest","deleteSuccess","userAPI","remove","action","alert","payload","result","removeAPI","localStorage","clear","window","location","href","error","exist","existAPI","join","joinAPI","login","loginAPI","setItem","JSON","parse","stringify","data","tokenData","userData","modify","modifyAPI","config","watchLogin","type","watchJoin","watchExist","watchModify","watchRemove"],"mappings":"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","sourcesContent":["import { PayloadAction } from \"@reduxjs/toolkit\";\nimport { call, delay, put, takeLatest } from \"redux-saga/effects\";\nimport {\n  LoginPayload,\n  UserDataPayload,\n  loginRequest,\n  loginFailure,\n  loginSuccess,\n  JoinPayload,\n  joinSuccess,\n  joinFailure,\n  joinRequest,\n  ExistPayload,\n  existSuccess,\n  existFailure,\n  existRequest,\n  ModifyPayload,\n  modifySuccess,\n  modifyFailure,\n  modifyRequest,\n  UserLoginDataPayload,\n  UserModifyDataPayload,\n  deleteRequest,\n  RemovePayload,\n  deleteSuccess,\n} from \"features/user/reducer/userSlice\";\nimport { userAPI } from \"features/user\";\n\nfunction* remove(action: PayloadAction<RemovePayload>) {\n  try {\n    alert(action.payload)\n    const result: UserDataPayload = yield call(\n      userAPI.removeAPI,\n      action.payload\n    );\n    alert(\"ëŒì•„ì˜´\")\n    yield put(deleteSuccess(result));\n    localStorage.clear()\n    window.location.href = \"/home\"\n\n\n  } catch (error: any) {\n    // alert(\"ì•„ì´ë””ì˜¤ë¥˜\")\n    yield put(modifyFailure(error));\n  }\n}\n\nfunction* exist(action: PayloadAction<ExistPayload>) {\n    try {\n      const result: UserDataPayload = yield call(\n        userAPI.existAPI,\n        action.payload\n      );\n      yield put(existSuccess(result));\n      alert(\"ê°€ëŠ¥í•œ ì•„ì´ë””ì…ë‹ˆë‹¤.\")\n    } catch (error: any) {\n      yield put(existFailure(error))\n      alert(error)\n      alert(\"ì“¸ìˆ˜ì—†ëŠ” ì•„ì´ë””ì…ë‹ˆë‹¤.\")\n    }\n  }\n\n\n  function* join(action: PayloadAction<JoinPayload>) {\n    try {\n      const result: UserDataPayload = yield call(\n        userAPI.joinAPI,\n        action.payload\n      );\n      yield put(joinSuccess(result));\n      window.location.href = 'users/login'\n      alert(\"ğŸ„íšŒì›ê°€ì…ì„ ì¶•í•˜ë“œë¦½ë‹ˆë‹¤ğŸ„\")\n    } catch (error: any) {\n      // alert(\"ì•„ì´ë””ì˜¤ë¥˜\")\n      yield put(joinFailure(error));\n    }\n  }\n  function* login(action: PayloadAction<LoginPayload>) {\n    try {\n      const result: UserLoginDataPayload = yield call(\n        userAPI.loginAPI,\n        action.payload\n      );\n      yield put(loginSuccess(result));\n      window.localStorage.setItem('sessionToken', JSON.parse(JSON.stringify(result.data.tokenData)))\n      window.localStorage.setItem('sessionUser', JSON.stringify(result.data.userData))\n      window.location.href = \"/home\"\n    } catch (error: any) {\n      alert(\"ì•„ì´ë”” í˜¹ì€ ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤!\")\n      yield put(loginFailure(error));\n    }\n  }\n  function* modify(action: PayloadAction<ModifyPayload>) {\n    try {\n      const result: UserModifyDataPayload = yield call(\n        userAPI.modifyAPI,\n        action.payload\n      );\n      yield put(modifySuccess(result));\n      // const test = result.config.data\n      // alert(`result? :: ${test} :: type :: ${typeof test}`)\n      // alert(`result parse :: ${JSON.parse(JSON.stringify(test))} :: type :: ${typeof JSON.parse(JSON.stringify(test))}`)\n      window.localStorage.setItem('sessionUser', JSON.parse(JSON.stringify(result.config.data)))\n      // alert(`SESSION ì €ì¥ë¨? ${window.localStorage.getItem('sessionUser')}`)\n      window.location.href = \"/mypage/setting\"\n\n\n    } catch (error: any) {\n      // alert(\"ì•„ì´ë””ì˜¤ë¥˜\")\n      yield put(modifyFailure(error));\n    }\n  }\n\n  // Watch í•¨ìˆ˜\n  export function* watchLogin() {\n    yield takeLatest(loginRequest.type, login);\n    // loginRequestì—ì„œì˜ typeì´ ì‹¤í–‰ë˜ë©´ loginí•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ëŠ”ë°\n    // loginRequestì˜ actionì´ ìˆìœ¼ë©´ ê·¸ ì•¡ì…˜ì´ loginí•¨ìˆ˜ì˜ ì¸ìë¡œ ë“¤ì–´ê°‘ë‹ˆë‹¤.\n  }\n  export function* watchJoin() {\n    yield takeLatest(joinRequest.type, join);\n  }\n  export function* watchExist() {\n    yield takeLatest(existRequest.type, exist);\n  }\n  export function* watchModify() {\n    yield takeLatest(modifyRequest.type, modify);\n  }\n  export function* watchRemove() {\n    yield takeLatest(deleteRequest.type, remove);\n  }"]},"metadata":{},"sourceType":"module"}